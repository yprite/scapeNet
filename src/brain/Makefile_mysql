CC = gcc
CFLAGS = -Wall
LDFLAGS = -lm $(shell mysql_config --libs)

all: brain_main_mysql brain_write_php

brain_main_mysql: brain_main_mysql.o brain_mysql.o
	$(CC) -o $@ $^ $(LDFLAGS)

brain_write_php: brain_write_php.o
	$(CC) -o $@ $^ $(LDFLAGS)

brain_write_php.o: brain_write_php.c
	$(CC) $(CFLAGS) -c $<

brain_main_mysql.o: brain_main_mysql.c
	$(CC) $(CFLAGS) -c $<

brain_mysql.o: ./lib/brain_mysql.c ./include/brain_mysql.h
	$(CC) $(CFLAGS) -c $<

clean:
	rm -f *.o brain_main_mysql
